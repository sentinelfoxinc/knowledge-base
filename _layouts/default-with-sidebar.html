<!DOCTYPE html>
<html lang="{{ site.lang | default: 'en-US' }}">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    {% seo %}
    <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
    {% include head-custom.html %}
  </head>
  <body>
    <div class="wrapper-with-sidebar">
      <!-- Sidebar -->
      <div class="sidebar">
        <div class="sidebar-content">
          <h2 class="sidebar-title">Knowledge Base</h2>
          <nav class="sidebar-nav">
            <ul>
              <li><a href="{{ '/' | relative_url }}" class="sidebar-link {% if page.url == '/' %}active{% endif %}">Home</a></li>
              
              <li class="sidebar-section">
                <span class="sidebar-section-title">AWS</span>
                <ul class="sidebar-submenu">
                  <li><a href="{{ '/aws/vpc' | relative_url }}" class="sidebar-link {% if page.url contains '/aws/vpc' %}active{% endif %}">VPC</a></li>
                  <li><a href="{{ '/aws/rds' | relative_url }}" class="sidebar-link {% if page.url contains '/aws/rds' %}active{% endif %}">RDS</a></li>
                </ul>
              </li>
              
              <li class="sidebar-section">
                <span class="sidebar-section-title">Terraform</span>
                <ul class="sidebar-submenu">
                  <li><a href="{{ '/terraform/workspace' | relative_url }}" class="sidebar-link {% if page.url contains '/terraform/workspace' %}active{% endif %}">Workspace</a></li>
                  <li><a href="{{ '/terraform/state-file' | relative_url }}" class="sidebar-link {% if page.url contains '/terraform/state-file' %}active{% endif %}">State File</a></li>
                </ul>
              </li>
            </ul>
          </nav>
        </div>
      </div>

      <!-- Main Content -->
      <div class="main-content-with-sidebar">
        <header>
          {% if site.logo %}
            <img src="{{ site.logo | relative_url }}" alt="Logo" />
          {% endif %}
          
          {% if site.github.is_project_page %}
            <p class="view"><a href="{{ site.github.repository_url }}">View the Project on GitHub <small>{{ site.github.repository_nwo }}</small></a></p>
          {% endif %}

          {% if site.github.is_user_page %}
            <p class="view"><a href="{{ site.github.owner_url }}">View My GitHub Profile</a></p>
          {% endif %}

          {% if site.show_downloads %}
            <ul class="downloads">
              <li><a href="{{ site.github.zip_url }}">Download <strong>ZIP File</strong></a></li>
              <li><a href="{{ site.github.tar_url }}">Download <strong>TAR Ball</strong></a></li>
              <li><a href="{{ site.github.repository_url }}">View On <strong>GitHub</strong></a></li>
            </ul>
          {% endif %}
        </header>
        
        <section>
          {{ content }}
        </section>
        
        <footer>
          {% if site.github.is_project_page %}
            <p>This project is maintained by <a href="{{ site.github.owner_url }}">{{ site.github.owner_name }}</a></p>
          {% endif %}
          <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
        </footer>
      </div>
    </div>

    <script src="{{ '/assets/js/scale.fix.js' | relative_url }}"></script>
    
    <!-- Sidebar JavaScript -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Mobile menu toggle
      const mobileMenuButton = document.createElement('button');
      mobileMenuButton.className = 'mobile-menu-toggle';
      mobileMenuButton.innerHTML = 'â˜° Menu';
      document.querySelector('.main-content-with-sidebar header').prepend(mobileMenuButton);
      
      mobileMenuButton.addEventListener('click', function() {
        document.querySelector('.sidebar').classList.toggle('mobile-open');
      });
      
      // Close mobile menu when clicking on a link
      document.querySelectorAll('.sidebar-link').forEach(link => {
        link.addEventListener('click', function() {
          document.querySelector('.sidebar').classList.remove('mobile-open');
        });
      });
    });
    </script>
  </body>
</html>